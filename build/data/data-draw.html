<!-- Front of card ===========================================================

    Draw! Card Data

    - Type:
        What's the answer?
        What does this image describe?

        Many potential use-cases for the Draw! card. See issue #165
        for ideas. At it's most basic we're asking "what does this code do?",
        or "what does this picture represent?", or "what routes could we use
        to fix this problem?", or "how do we solve this?".

        - An animated gif or photograph
        - A sketch or iPad drawing
        - A question that you must sketch out
        - Perhaps even a video!

    - Docs:
        @ https://tinyurl.com/anki-draw-card

    - Key:
        â˜… Required
        â˜† Optional (recommended)
        âœŽ Optional (notes, markdown)
        â¤· Field Type

    - Notes:
        Where fields are auto-wrapped with an HTML tag, copy/paste the compiled
        data _within_ those tags in your Anki fields, otherwise you'll have
        formatting issues. For example:

            `â˜… Title` field:

            <h1>What happens is we type <code>Model</code> in the repl?</h1>
            xxxx-------------------------------------------------------xxxxx

        Compiled data is simply meant to speed up the card creation process â€”
        it's not meant to be viewed in the browser. Best viewed in a text editor
        (such as Visual Studio Code) to copy/paste your Anki card fields.

========================================================================== -->
<!-- -------------------------------------------------------------------------
    â˜… Title

    â¤· `string` (auto wrapped with a `H1` tag)
-------------------------------------------------------------------------- -->
<h1>How can we avoid nested update functions and messages?</h1>
<!-- -------------------------------------------------------------------------
    â˜† Subtitle

    â¤· `string` (auto wrapped with a `H2` tag)
-------------------------------------------------------------------------- -->
<h2>Nested records</h2>
<!-- -------------------------------------------------------------------------
    â˜† Syntax (inline code)

    â¤· `code string` (auto wrapped with `<p><code>` tag)

    This is NOT a `code block` field! It's for short lines of code only.
-------------------------------------------------------------------------- -->
<p><code>...</code></p>
<!-- -------------------------------------------------------------------------
    â˜† Sample (caption or hint)

    â¤· `string` (auto wrapped with a `<figcaption>` tag â€”Â doesn't need `<p>` tag)

    Helpful for when the header question grows too long, or the Sample
    requires some context or a hint. Alternative to code comments.
-------------------------------------------------------------------------- -->
<p>false</p>
<!-- -------------------------------------------------------------------------
    â˜… Sample (image)

    â¤· `image`

      | Fuse the learning point with some imagery can help lock in learning.
      | It's better to stick to images, an animated GIF, or video for the Draw!
      | card's front, instead of a block of code. You could even add a code sample
      | as a snapshot if you're feeling particularly lazy (although you may as
      | well just use a Simple! card as it's easy).

      An image that asks the question _"what does this code do?"_, or _"what
      does this picture represent?"_, or _"what routes could we use to fix
      this problem?"_, or _"how do we solve this?"_.

      Use the ðŸ“Ž paperclip button to add an image to Anki, or store it in the
      cloud and use the `<img ...>` tag. Be aware that duplicate file names could
      cause you problems with Anki's filesystem.

      Image should be roughly 390px wide (logical width) at a scale of @3x
      for an iPhone 15. Try to keep file size under 100kb. Ratio should be 4:3
      or 16:9 for full-width.
          @ https://www.ios-resolution.com
          @ https://tinyjpg.com (minimize)
          @ https://developer.apple.com/design/human-interface-guidelines/images
-------------------------------------------------------------------------- -->
<figure>
<img src="../../source/media/draw-nested-function.png"
alt="An image of a nest" />
<figcaption aria-hidden="true">An image of a nest</figcaption>
</figure>
<!-- Back of card ======================================================== -->
<!-- -------------------------------------------------------------------------
    â˜… Key point (image | code block)

    â¤· `image | code block`

      | You can store either an image or `markdown->html` code block.

      An image that shows the answer to _"what does this code do?"_, or _"what
      does this picture represent?"_, or _"what routes could we use to fix
      this problem?"_, or _"how do we solve this?"_.

      The image will need to be added to Anki first, or you can store it
      in the cloud somewhere, and link to it like this.
-------------------------------------------------------------------------- -->
<div class="sourceCode" id="cb1"><pre
class="sourceCode elm"><code class="sourceCode elm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Dressing</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">=</span> <span class="dt">Caesar</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">|</span> <span class="dt">OliveOil</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Msg</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">=</span> <span class="dt">UpdateDressing</span> <span class="dt">Dressing</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="kw">alias</span> <span class="dt">Model</span> <span class="op">=</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  { <span class="fu">user</span> : <span class="dt">User</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">,</span> <span class="fu">dressing</span> : <span class="dt">Dressing</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">,</span> <span class="fu">other</span> : <span class="dt">Other</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">-- An extensible record --------</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="kw">alias</span> <span class="dt">Dressing</span> <span class="fu">r</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">=</span> { <span class="fu">r</span> <span class="op">|</span> <span class="fu">dressing</span> : <span class="dt">Dressing</span> }</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">dressing</span> : <span class="dt">Dressing</span> <span class="fu">r</span> <span class="op">-&gt;</span> <span class="dt">Dressing</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dressing</span> <span class="fu">record</span> <span class="op">=</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">record</span><span class="op">.</span><span class="fu">dressing</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">-- Extract w/ type signature ---</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="fu">dressing</span> :</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  { <span class="fu">r</span> <span class="op">|</span> <span class="fu">dressing</span> : <span class="dt">Dressing</span> }</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="op">-&gt;</span> <span class="dt">Dressing</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="fu">dressing</span> <span class="fu">record</span> <span class="op">=</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">record</span><span class="op">.</span><span class="fu">dressing</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">-- Extract with selector -------</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="fu">dressing</span> : <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Dressing</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="fu">dressing</span> <span class="op">=</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">dressing</span> <span class="co">-- helper function</span></span></code></pre></div>
<!-- -------------------------------------------------------------------------
    â˜… Key point notes

    â¤· `rich html`
-------------------------------------------------------------------------- -->
<blockquote>
<p>We can simplify our <code>Msg</code> and prefer a flatter model</p>
</blockquote>
<p>We can also <em>narrow the types</em> for our view functions, to make
them easier to reason about. Without simplifying our model and messages,
the code will become a lot harder to read.</p>
<!-- -------------------------------------------------------------------------
    âœŽ Other notes

    â¤· `rich html`
-------------------------------------------------------------------------- -->
<p>Use <a
href="https://discourse.elm-lang.org/t/extensible-records-seems-to-be-pruning-fields-and-failing-to-compile/8078/7">extensible
records</a> with a flat model to <a
href="https://discourse.elm-lang.org/t/domain-driven-type-narrowing/7753/20">narrow
your types</a> wherever possible, removing the need for nested records!
Extensible records have downsides, so only use when necessary.</p>
<!-- -------------------------------------------------------------------------
    âœŽ Markdown

    â¤· `raw text`

      Do not add the compiled HTML to your card, rather, use the raw text
      Markdown fenced code block. This makes for easier editing of a card
      later on.

      Warning: may increase card file size
        @ https://github.com/badlydrawnrob/anki/issues/116
-------------------------------------------------------------------------- -->
<p>false</p>
